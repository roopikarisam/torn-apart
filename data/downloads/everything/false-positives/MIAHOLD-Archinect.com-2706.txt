




    function arc_editor(el) {
    	$(el).redactor({
			minHeight: 200,
			pasteBlockTags: ['ul', 'ol', 'li', 'p'],
			pasteInlineTags: ['strong', 'br', 'b', 'em', 'i'],
			imageUpload: '/redactor/upload',
			plugins: ['imagemanager'],
			buttons: ['bold', 'italic', 'lists', 'link', 'image'],
			callbacks:
			{
		        imageUpload: function(image, json)
		        {
		            $(image).replaceWith('');
		        },
		        imageUploadError: function(json, xhr)
		        {
		            alert(json.message);
		        }
		    }
		});
    	/*
	$(el).ckeditor(function() {}, {
//			removePlugins: 'elementspath,scayt,menubutton,contextmenu',
			removePlugins: 'liststyle,tabletools,contextmenu',
			//plugins:'a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,dialogadvtab,div,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,iframe,image,indent,justify,keystrokes,link,list,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,smiley,showblocks,showborders,sourcearea,stylescombo,table,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc,vimeo,youtube',
			//toolbar: [['Bold', 'Italic', 'BulletedList', 'Link', 'Image', 'Youtube', 'Vimeo' ]],
			plugins:'a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,dialogadvtab,div,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,iframe,image,indent,justify,keystrokes,link,list,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,smiley,showblocks,showborders,sourcearea,stylescombo,table,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc,archinect',
			toolbar: [['Bold', 'Italic', 'BulletedList','NumberedList', 'Link', 'Image']],
			resize_dir: 'vertical',
			resize_enabled: false,
			//disableObjectResizing: true,
			forcePasteAsPlainText: true,
			disableNativeSpellChecker: false,
			scayt_autoStartup: false,
			skin: 'v2',
			height: 300,
			linkShowAdvancedTab: false,
			linkShowTargetTab: false,
			language: 'en',
			customConfig : '',
			toolbarCanCollapse: false  });
		*/
    }

	function arc_editor_feature(el) {
    	$(el).redactor({
			minHeight: 300,
			pasteBlockTags: ['ul', 'ol', 'li', 'p'],
			pasteInlineTags: ['strong', 'br', 'b', 'em', 'i'],
			imageUpload: '/redactor/upload',
			plugins: ['source', 'imagemanager'],
			buttons: ['html', 'format', 'bold', 'italic', 'underline', 'lists', 'link', 'image'],
			formatting: ['p'],
			formattingAdd: {
				"figcaption": {
					title: 'Caption',
					args: ['p', 'class', 'figcaption', 'toggle']
				},
				"subheading": {
					title: 'Subheading',
					args: ['h3', 'class', 'subheading', 'toggle']
				},
				"pullquote-left": {
					title: 'Quote Left',
					args: ['blockquote', 'class', 'pullquote-left', 'toggle']
				},
				"pullquote-centered": {
					title: 'Quote Centered',
					args: ['blockquote', 'class', 'pullquote-center', 'toggle']
				},
				"pullquote-right": {
					title: 'Quote Right',
					args: ['blockquote', 'class', 'pullquote-right', 'toggle']
				},
			},
			callbacks:
			{
		        imageUpload: function(image, json)
		        {
		            $(image).replaceWith('');
		        },
		        imageUploadError: function(json, xhr)
		        {
		            alert(json.message);
		        }
		    }
		});
		/*
		$(el).ckeditor(function() {}, {
//			removePlugins: 'elementspath,scayt,menubutton,contextmenu',
			removePlugins: 'liststyle,tabletools,contextmenu',
			//plugins:'a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,dialogadvtab,div,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,iframe,image,indent,justify,keystrokes,link,list,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,smiley,showblocks,showborders,sourcearea,stylescombo,table,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc,vimeo,youtube',
			//toolbar: [['Bold', 'Italic', 'BulletedList', 'Link', 'Image', 'Youtube', 'Vimeo' ]],
			plugins:'a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,dialogadvtab,div,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,iframe,image,indent,justify,keystrokes,link,list,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,smiley,showblocks,showborders,sourcearea,stylescombo,table,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc,archinect',
			toolbar: [['Bold', 'Italic', 'BulletedList','NumberedList' , 'Link', 'Image','FontSize','TextColor']],
			resize_dir: 'vertical',
			resize_enabled: true,
			//disableObjectResizing: true,
			forcePasteAsPlainText: true,
			disableNativeSpellChecker: false,
			scayt_autoStartup: false,
			skin: 'v2',
			height: 300,
			toolbarCanCollapse: false  });
		*/
    }

    function arc_remove_editor(el) {
    	$(el).redactor('core.destroy');
    	/*
		$(el).ckeditor(function(){
			this.destroy();
		});
		*/
    }

    function arc_editor_423(el, extra_params) {
    	if (extra_params === undefined)
    	{    		
    		extra_params = false;
    	}
    	$('#' + el).redactor({
			minHeight: 200,
			pasteBlockTags: ['ul', 'ol', 'li', 'p'],
			pasteInlineTags: ['strong', 'br', 'b', 'em', 'i'],
			imageUpload: '/redactor/upload',
			plugins: ['imagemanager'],
			buttons: ['bold', 'italic', 'lists', 'link', 'image'],
			imageUploadFields: extra_params,
			callbacks:
			{
		        imageUpload: function(image, json)
		        {
		            $(image).replaceWith('');
		        },
		        imageUploadError: function(json, xhr)
		        {
		            alert(json.message);
		        }
		    }
		});
    	/*
       CKEDITOR.replace(el , {
			allowedContent: 'p br b i ol ul li strong em center; a[*](*); img[*]; iframe[*]',
			removePlugins: 'liststyle,tabletools,contextmenu',
            plugins:'a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,dialogadvtab,div,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,iframe,image,indent,justify,link,list,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,smiley,showblocks,showborders,sourcearea,stylescombo,table,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc,archinect,wysiwygarea',
			toolbar: [['Bold', 'Italic', 'BulletedList','NumberedList', 'Link', 'Image']],
			resize_dir: 'vertical',
			resize_enabled: true,
			//forcePasteAsPlainText: true,
			disableNativeSpellChecker: false,
			scayt_autoStartup: false,
			skin: 'v2',
			height: 300,
			linkShowAdvancedTab: false,
			linkShowTargetTab: false,
			language: 'en',
			customConfig : '',
			toolbarCanCollapse: false
        });
        */
    }

    function arc_editor_basic(el)
    {
    	$('#' + el).redactor({
			minHeight: 200,
			pasteBlockTags: ['ul', 'ol', 'li', 'p'],
			pasteInlineTags: ['strong', 'br', 'b', 'em', 'i'],
			buttons: ['bold', 'italic', 'lists', 'link']
		});
	}

	function arc_editor_423_admin(el, extra_params) {
		if (extra_params === undefined)
    	{
    		extra_params = false;
    	}
		$('#' + el).redactor({
			minHeight: 300,
			pasteBlockTags: ['ul', 'ol', 'li', 'p'],
			pasteInlineTags: ['strong', 'br', 'b', 'em', 'i'],
			imageUpload: '/redactor/upload',
			plugins: ['codemirror', 'imagemanager', 'removeformat', 'alignment'],
			codemirror: {
				lineNumbers: true,
				lineWrapping: true,
				mode: 'xml',
				indentUnit: 4
			},
			buttons: ['html', 'format', 'bold', 'italic', 'underline', 'lists', 'link', 'image'],
			formatting: ['p'],
			formattingAdd: {
				"figcaption": {
					title: 'Caption',
					args: ['p', 'class', 'figcaption', 'toggle']
				},
				"subheading": {
					title: 'Subheading',
					args: ['h3', 'class', 'subheading', 'toggle']
				},
				"pullquote-left": {
					title: 'Quote Left',
					args: ['blockquote', 'class', 'pullquote-left', 'toggle']
				},
				"pullquote-centered": {
					title: 'Quote Centered',
					args: ['blockquote', 'class', 'pullquote-center', 'toggle']
				},
				"pullquote-right": {
					title: 'Quote Right',
					args: ['blockquote', 'class', 'pullquote-right', 'toggle']
				},
			},
			imageUploadFields: extra_params,
			callbacks:
			{
		        imageUpload: function(image, json)
		        {
		             $(image).replaceWith('');
		        },
		        imageUploadError: function(json, xhr)
		        {
		            alert(json.message);
		        }
		    }
		});
		/*
       CKEDITOR.replace(el , {
			allowedContent: 'p br b i ol ul li strong em center; a[*]{*}(*); img[*]; iframe[*]',
			removePlugins: 'liststyle,tabletools,contextmenu',
            plugins:'a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,dialogadvtab,div,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,iframe,image,indent,justify,link,list,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,smiley,showblocks,showborders,sourcearea,stylescombo,table,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc,archinect,wysiwygarea',
			toolbar: [['Bold', 'Italic', 'BulletedList','NumberedList', 'Link', 'Image', 'Source']],
			resize_dir: 'vertical',
			resize_enabled: true,
			//forcePasteAsPlainText: true,
			disableNativeSpellChecker: false,
			scayt_autoStartup: false,
			skin: 'v2',
			height: 300,
			linkShowAdvancedTab: false,
			linkShowTargetTab: false,
			language: 'en',
			customConfig : '',
			toolbarCanCollapse: false
        });
        */
    }

    function arc_editor_feature_423(el, extra_params) 
    {
    	if (extra_params === undefined)
    	{    		
    		extra_params = false;
    	}
    	$('#' + el).redactor({
			minHeight: 300,
			pasteBlockTags: ['ul', 'ol', 'li', 'p'],
			pasteInlineTags: ['strong', 'br', 'b', 'em', 'i'],
			imageUpload: '/redactor/upload',
			plugins: ['source', 'imagemanager'],
			buttons: ['html', 'format', 'bold', 'italic', 'underline', 'lists', 'link', 'image'],
			formatting: ['p'],
			formattingAdd: {
				"figcaption": {
					title: 'Caption',
					args: ['p', 'class', 'figcaption', 'toggle']
				},
				"subheading": {
					title: 'Subheading',
					args: ['h3', 'class', 'subheading', 'toggle']
				},
				"pullquote-left": {
					title: 'Quote Left',
					args: ['blockquote', 'class', 'pullquote-left', 'toggle']
				},
				"pullquote-centered": {
					title: 'Quote Centered',
					args: ['blockquote', 'class', 'pullquote-center', 'toggle']
				},
				"pullquote-right": {
					title: 'Quote Right',
					args: ['blockquote', 'class', 'pullquote-right', 'toggle']
				},
			},
			imageUploadFields: extra_params,
			callbacks:
			{
		        imageUpload: function(image, json)
		        {
		             $(image).replaceWith('');
		        },
		        imageUploadError: function(json, xhr)
		        {
		            alert(json.message);
		        }
		    }
		});
    	/*
        CKEDITOR.replace(el , {
            allowedContent: 'p br b i ol ul li strong em center; a[*]{*}(*); img[*]; span[*]{*}(*); iframe[*]',
            removePlugins: 'liststyle,tabletools,contextmenu',
            plugins:'a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,dialogadvtab,div,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,iframe,image,indent,justify,link,list,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,smiley,showblocks,showborders,sourcearea,stylescombo,table,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc,archinect,wysiwygarea',
			toolbar: [['Bold', 'Italic', 'BulletedList','NumberedList' , 'Link', 'Image','FontSize','TextColor']],
			resize_dir: 'vertical',
			resize_enabled: true,
			//disableObjectResizing: true,
			//forcePasteAsPlainText: true,
			disableNativeSpellChecker: false,
			scayt_autoStartup: false,
			skin: 'v2',
			height: 300,
			linkShowAdvancedTab: false,
			linkShowTargetTab: false,
			language: 'en',
			customConfig : '',
			toolbarCanCollapse: false
        });
        */
    }

	function arc_editor_feature_423_admin(el, extra_params) 
	{
		if (extra_params === undefined)
    	{    		
    		extra_params = false;
    	}
		$('#' + el).redactor({
			minHeight: 300,
			pasteBlockTags: ['ul', 'ol', 'li', 'p'],
			pasteInlineTags: ['strong', 'br', 'b', 'em', 'i'],
			imageUpload: '/redactor/upload',
			plugins: ['codemirror', 'imagemanager', 'removeformat', 'alignment'],
			codemirror: {
				lineNumbers: true,
				lineWrapping: true,
				mode: 'xml',
				indentUnit: 4
			},
			buttons: ['html', 'format', 'bold', 'italic', 'underline', 'lists', 'link', 'image'],
			formatting: ['p'],
			formattingAdd: {
				"figcaption": {
					title: 'Caption',
					args: ['p', 'class', 'figcaption', 'toggle']
				},
				"subheading": {
					title: 'Subheading',
					args: ['h3', 'class', 'subheading', 'toggle']
				},
				"pullquote-left": {
					title: 'Quote Left',
					args: ['blockquote', 'class', 'pullquote-left', 'toggle']
				},
				"pullquote-centered": {
					title: 'Quote Centered',
					args: ['blockquote', 'class', 'pullquote-center', 'toggle']
				},
				"pullquote-right": {
					title: 'Quote Right',
					args: ['blockquote', 'class', 'pullquote-right', 'toggle']
				},
			},
			imageUploadFields: extra_params,
			callbacks:
			{
		        imageUpload: function(image, json)
		        {
		            $(image).replaceWith('');
		        },
		        imageUploadError: function(json, xhr)
		        {
		            alert(json.message);
		        }
		    }
		});
		/*
        CKEDITOR.replace(el , {
			allowedContent: 'p br b i ol ul li strong em center; a[*]{*}(*); img[*]; span[*]{*}(*); iframe[*]',
			removePlugins: 'liststyle,tabletools,contextmenu',
            plugins:'a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,dialogadvtab,div,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,iframe,image,indent,justify,link,list,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,smiley,showblocks,showborders,sourcearea,stylescombo,table,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc,archinect,wysiwygarea',
			toolbar: [['Bold', 'Italic', 'BulletedList','NumberedList' , 'Link', 'Image','FontSize','TextColor', 'Source']],
			resize_dir: 'vertical',
			resize_enabled: true,
			//disableObjectResizing: true,
			//forcePasteAsPlainText: true,
			disableNativeSpellChecker: false,
			scayt_autoStartup: false,
			skin: 'v2',
			height: 300,
			linkShowAdvancedTab: false,
			linkShowTargetTab: false,
			language: 'en',
			customConfig : '',
			toolbarCanCollapse: false
        });
        */
    }

    function arc_remove_editor_423 (el) {
    	$(el).redactor('core.destroy');
    	/*
        if(CKEDITOR.instances[el]) {
            CKEDITOR.instances[el].destroy();
        }
        */
    }

		
	$(document).ready(function(){
		$('.AnchorScroller').click(function() {
		   var elementClicked = $(this).attr("href");
		   var destination = $(elementClicked).offset().top;
		   $("html:not(:animated),body:not(:animated)").animate({ scrollTop: destination-0}, 300 );
		   return false;
		});
	});
	
		

$(document).ready(function () {

  	$('.StickyBannerContainer').hide();

	var ColContentBottom = $('.ColContent').position().top+$('.ColContent').outerHeight(true);
	var ColSidebarBottom = $('.ColSidebar').position().top+$('.ColSidebar').outerHeight(true);

	if (ColContentBottom > ColSidebarBottom) {
		$('.StickyBannerContainer').show()
	};

  var top = $('#StickyBanner').offset().top - parseFloat($('#StickyBanner').css('marginTop').replace(/auto/, 0));
  $(window).scroll(function (event) {
	// what the y position of the scroll is
	var y = $(this).scrollTop();

	// whether that's below the form
	if (y >= top) {
	  // if so, ad the fixed class
	  $('#StickyBanner').addClass('fixed');
	} else {
	  // otherwise remove it
	  $('#StickyBanner').removeClass('fixed');
	}
  });

});


	
var action_referer = null;
function arc_comment_head_actions(suffix) 
{
	suffix = (typeof suffix == "undefined")? '': suffix;
	$('#arc_new_comment').hide();

    	$.ajax(
    	{
            type: 'GET',
            url: '/post_comment'+suffix+'/' + (new Date().getTime()) + arc_pathname(document.location.pathname),
            success: function(data, status, xhr)
            {
                $('#arc_new_comment').html(data);
                $('#arc_new_comment').slideDown();
				if(suffix != '_ios')
					arc_editor_423('body_html');						
			}
		});

	$(document).on('click', 'a.arc_edit_comment', function(e)
	{
		e.preventDefault();
		arc_remove_editor_423( 'body_html' );
        $('#arc_new_comment').remove();
		var id =arc_pathname( $(this).attr('href'), true);

		$.ajax(
		{
			type: 'GET',
			url: '/edit_comment'+suffix+'/' + (new Date().getTime()) + '/' + id + arc_pathname(document.location.pathname),
			success: function(data, status, xhr)
			{
				if(data > '') 
				{
					$('#arc_comment_'+id).replaceWith(data);
					arc_editor_423( $('.editor').attr('id') );
					$('a.arc_edit_comment').hide();
				}
			}
		});
		return false;
	});
/*
				$('a.arc_flag_comment').click(function(e){

					e.preventDefault();

					var id = arc_pathname($(this).attr('href'), true);

					var button = this;

					$.ajax({
						type: 'POST',
						url: '/flag_comment',
						data: {id: id, arc_token: window.arc_token},
						success: function(data, status, xhr){

							if( data > '' ) {

								$(button).replaceWith( 'Flagged' );
							}
						}
					});
					return false;
				});
	*/			
	$(document).on('click', "a.arc_reply_comment", function()
	{
		var id = arc_pathname($(this).attr('href'), true);
		var reply_container = $(".arc_reply_comment_box").parents(".ReplyComments");
		$(".arc_reply_comment_box").remove();
		if ($(reply_container).find(".Line").length == 0)
			$(reply_container).remove();
		
		var container = $(this).parents(".Line");
		if (!$(container).find(".ReplyComments").length)
			$(container).append('');										
						
		$(container).find(".ReplyComments").append('');
		var referrer = $(this);
		$(".ReplyHelp").remove();
		$("a.arc_reply_comment").show();
		$(".BottomReply").show();
		$(container).find(".BottomReply").hide();
		$.ajax(
		{
            type: 'POST',
            data: {'reply_id': id},
            url: '/post_comment'+suffix+'/' + (new Date().getTime()) + arc_pathname(document.location.pathname),
            success: function(data, status, xhr)
            {
               	$('.arc_reply_comment_box').html(data);
               	$('.arc_reply_comment_box').show();
				//arc_editor_423($(".arc_reply_comment_box .editor").attr('id'));		
				$("html, body").animate(
				{
			        scrollTop: $('.arc_reply_comment_box').offset().top-200 
			   	}, 500);								   
			   	$("#reply_body_html").autogrow();
			   	$("#reply_body_html").focus();
			   	$("#reply_body_html").keyup(function(e)
			   	{
				   	if (e.keyCode == 13)
				   	{
				   		if ($.trim($(this).val()) != '')	
				   			$('.arc_reply_comment_box #comment_reply_form').submit();
				   	}
			   	});
			   	$(referrer).hide();
			   	if (!$(referrer).hasClass('BottomReply'))
			   	$('reply below ↓').insertAfter($(referrer));
			}
		});
		return false;
	});
				
	$(document).on('click', "#cancel_reply_button", function()
	{
		$(".arc_reply_comment_box").remove();
	});
	
	$(document).on('click', ".CommentAction", function()
	{
		var status = $(this).attr('rel');
		var modal_data = [];
		if (status == 'ignore')
			modal_data = co['ignore'];
		else if(status == 'block')
			modal_data = co['block'];
		else if(status == 'unblock')
			modal_data = co['unblock'];	
		else if(status == 'flag')
			modal_data = co['flag'];
		else if(status == 'ban')
			modal_data = co['ban'];
		else if (status == '30')
			modal_data = co['feature'];
		else if (status == '15')
		{
			var prev = $(this).attr("prev");
   			if (prev == 'hidden')
   				modal_data = co['show'];
   			else
   				modal_data = co['unfeature'];
		}
		else if (status == '25')
			modal_data = co['hide'];
					
		$("#comment_moderation .ModalTitle h1").html(modal_data.title);
		$("#comment_moderation .description").html(modal_data.description);
		$("#comment_moderation #submit_button").val(modal_data.submit);
		$("#comment_moderation").modal();
		action_referer = $(this);
		return false;	
	});
				
	$(document).on('click', ".arc_view_hidden_comment", function()
	{					
		var id = $(this).attr('href');
		$(".arc_comment_" + id).show();
		$(".arc_comment_" + id).prev('.HiddenLine').remove();
		return false;	
	});
				
	$(document).on('submit', 'form.arc_ajax_comment', function(e)
	{
		e.preventDefault();
			var form = $(this);
		/*
		if( typeof( arc_remove_editor_423 ) == 'function' ) {
			arc_remove_editor_423($('form.arc_ajax_comment .editor').attr('id'));
		}
		*/
		$("form.arc_ajax_comment .CommentForm").hide();
		//arc_filterform(form);

		$('').attr(
		{
			    type: 'hidden',
			    name: 'arc_token',
			    value: window.arc_token
		}).appendTo(form);

		$.ajax(
		{
			type: 'POST',
			url: $(form).attr('action'),
			data: $(form).serialize(),
			success: function(data, status, xhr){
				$('body').append("" + data + "");
				data = $("#temp_append").clone();
				$("#temp_append").remove();
				if (!$(data).find(".arc_ajax_comment").length)
				{
					var parent_node = $(".arc_reply_comment_box").parents(".Line");
					$(parent_node).find(".BottomReply").remove();
					if ($(parent_node).find(".ReplyComments").length > 0)
					{
						$(parent_node).find(".ReplyComments").append($(data).html());									
					}
					else
					{
						$(parent_node).append('' + $(data).html() + '');
					}
					$(".arc_reply_comment_box").remove();
					$(".ReplyHelp").remove();
					$("a.arc_reply_comment").show();
				}
				else
				{
					$(form).replaceWith($(data).html());
					$("form.arc_ajax_comment .CommentForm").slideDown();
					/*if( typeof( arc_editor_423 ) == 'function' ) {
						arc_editor_423($('form.arc_ajax_comment .editor').attr('id'));
					}*/
				}							
			}
		});	
		return false;
	});
				
	$(".comment_user_1>.Top>.Right>.CommentModerate li .HidingAction,.comment_user_1>.Top>.Right>.CommentModerate li .BlockingAction,.comment_user_1>.Top>.Right>.CommentModerate li a[rel=ignore], .comment_user_1>.Top>.Right>.CommentModerate li .arc_flag_comment").remove();
}		

$(document).ready(function()
{
	$('.TooltipUser').tipsy({gravity: 'w', html: true, offset: 10, delayOut: 500});	
	
	$(document).on('click', "#comment_moderation #cancel_button", function()
	{
		$.modal.close();
	});
	$(document).on('click', "#comment_moderation #submit_button", function()
	{
		if (action_referer != null)
		{
			if ($(action_referer).hasClass('arc_flag_comment'))
				flag_comment(action_referer);
			else if ($(action_referer).hasClass('arc_ban_user'))
				ban_user(action_referer);
			else
				update_comment_status(action_referer);
		}
		action_referer = null;
		$.modal.close();
	});
	
	var comment_modal = $("#comment_modal").clone();
	$("#comment_modal").remove();
	$('body').append($(comment_modal).html());
});

function update_comment_status(point)
{	
	$(point).hide();
	$("").insertAfter($(point));
	var data = {"id": $(point).attr('href'), "status": $(point).attr('rel')};
	$.ajax({
       type: 'POST',
       data: data,
       url: '/update_comment_status',
       success: function(result, status, xhr)
       {
       	$(point).show();
       	$("#temp-loader").remove();
       	result = $.parseJSON(result);
       	if (result.status == 'success')
       	{
       		if (data.status == 'ignore'){
	       		$(".comment_user_" + data.id).slideUp();
	       		var username = $(".comment_user_" + data.id + " .UserName").clone();
	       		$(username[0]).find(".UserInfo").remove();
	       		$('' + $(username[0]).text() + ' is ignored by you Edit Ignore Settings').insertBefore(".comment_user_" + data.id);
	       	}
	       	else if (data.status == 'block')
	       	{
	       		var touch = ".comment_user_" + result.data.user_id;
	       		$(touch).addClass("BlockedComment").removeClass("FeaturedComment HiddenComment");
	       		$(touch + ">.Top>.Right>.CommentModerate>ul>li>.BlockingAction").html(co.unblock.text).attr("rel", "unblock").attr("original-title", co.unblock.title);
	       		$(touch + ">.Top>.Right>.CommentModerate>ul>li>.FeaturingAction").html(co.feature.text).attr("rel", 30).attr("original-title", co.feature.title);
	       		$(touch + ">.Top>.Right>.CommentModerate>ul>li>.HidingAction").html(co.hide.text).attr("rel", 25).attr("original-title", co.hide.title);
	       		$("#featured_comments_section .comment_user_" + result.data.user_id).remove();	
	       	}
				else if (data.status == 'unblock')
	       	{
	       		var touch = ".comment_user_" + result.data.user_id;
	       		$(touch).removeClass("BlockedComment");
	       		$(touch + ">.Top>.Right>.CommentModerate>ul>li>.BlockingAction").html(co.block.text).attr("rel", "block").attr("original-title", co.block.title);	
	       	}
	       	else if(data.status == '30')
	       	{
	       		window.location.reload();
	       		/*
	       		$("#arc_comment_" + data.id).addClass("FeaturedComment").removeClass("BlockedComment HiddenComment");       		
	       		$(point).html(co.unfeature.text).attr("rel", 15).attr("original-title", co.unfeature.title);
	       		$("#arc_comment_" + data.id + ">.Top>.Right>.CommentModerate>ul>li>.BlockingAction").html(co.block.text).attr("rel", "block").attr("original-title", co.block.title);
	       		$("#arc_comment_" + data.id + ">.Top>.Right>.CommentModerate>ul>li>.HidingAction").html(co.hide.text).attr("rel", 25).attr("original-title", co.hide.title);
	       		$("#arc_comment_" + data.id + ">.Top").prepend('Featured Comment');
	       		if (!$("#featured_comments_section").length){
	       			var selector = $(".All-Comments-Header").length > 0 ? ".All-Comments-Header": "#comments_section";
	       			selector = $(".CommentBanner").length ? ".CommentBanner": selector;
	       			$('Back to Top &nbsp;↑1 Featured Comment').insertBefore(selector);
	       		}else{
						var featured_comment_counter = parseInt($("#featured_comment_counter").html());
						featured_comment_counter++;
						$("#featured_comment_counter").parent('h2').html('' + featured_comment_counter + ' Featured Comments');	       		
	       		}
	       		$("#featured_comments_section").append('' + $("#arc_comment_" + data.id).clone().html() + '');
	       		$("#featured_comments_section #arc_featured_comment_" + data.id + " .Right").remove();
	       		$("#featured_comments_section #arc_featured_comment_" + data.id + " .ReplyComments").remove();
	       		$("#featured_comments_section #arc_featured_comment_" + data.id + " .arc_reply_comment").remove();
	       		$("#featured_comments_section #arc_featured_comment_" + data.id + " .FeaturedCommentMarker").remove();
	       		*/
	       	}
	       	else if(data.status == '15')
	       	{
	       		var prev = $(point).attr("prev");
	       		if (prev == 'hidden')
	       		{
	       			$("#arc_comment_" + data.id).prev('.HiddenLine').remove();
	       			$("#arc_comment_" + data.id).removeClass("HiddenComment");
	       			$(point).html(co.hide.text).attr("rel", 25).attr("original-title", co.hide.title);	
	       		}
	       		else
	       		{
	       			window.location.reload();
	       			/*
	       			$("#arc_comment_" + data.id).removeClass("FeaturedComment");
	       			$("#arc_comment_" + data.id + ">.Top>.FeaturedCommentMarker").remove();
	       			var featured_comment_counter = parseInt($("#featured_comment_counter").html());
						featured_comment_counter--;
						if (featured_comment_counter == 0){
							$(".FeaturedComments").remove();
							$("#featured_comments_section").remove();	
						}else{
							$("#featured_comment_counter").parent('h2').html('' + featured_comment_counter + ' Featured Comment' + (featured_comment_counter > 1 ? 's': ''));	
						}						
	       			$(point).html(co.feature.text).attr("rel", 30).attr("original-title", co.feature.title);
	       			$("#featured_comments_section").find("#arc_featured_comment_" + data.id).remove();
	       			*/
	       		}
	       	}
	       	else if(data.status == '25')
	       	{
	       		$("#featured_comments_section #arc_featured_comment_" + data.id).remove();
	       		var user_html = $("#arc_comment_" + data.id + ">.Top>.user-title").clone();
	       		$(user_html).find(".UserInfo").remove();
	       		$(user_html).find(".UserName").css("display", "inline");       		
	       		$("" + $.trim($(user_html).text()) +"'s comment has been hidden. View comment").insertBefore("#arc_comment_" + data.id);
	       		$("#arc_comment_" + data.id).hide().removeClass("FeaturedComment BlockedComment");
	       		$(point).html(co.show.text).attr("rel", 15).attr("original-title", co.show.title).attr("prev", 'hidden');
	       		$("#arc_comment_" + data.id + ">.Top>.Right>.CommentModerate>ul>li>.BlockingAction").html(co.block.text).attr("rel", "block").attr("original-title", co.block.title);
	       		$("#arc_comment_" + data.id + ">.Top>.Right>.CommentModerate>ul>li>.FeaturingAction").html(co.feature.text).attr("rel", 30).attr("original-title", co.feature.title);
     			}
	       	else
	       	{
	         	window.location.reload();
	        }	
       	}
       	else if(result.status == 'error')
       	{
       		alert(result.message);
       	}       	
		}
	});	
}

function flag_comment(point)
{
	var id = arc_pathname($(point).attr('href'), true);
	$.ajax(
	{
		type: 'POST',
		url: '/flag_comment',
		data: {id: id, arc_token: window.arc_token},
		success: function(data, status, xhr)
		{
			if(data > '') 
			{
				$(point).replaceWith('Flagged');
			}
		}
	});	
}

function ban_user(point)
{
	var id = arc_pathname($(point).attr('href'), true);
	$.ajax(
	{
		type: 'POST',
		url: '/ban_close',
		data: {user_id: id, ban_close: 1, arc_token: window.arc_token},
		success: function(data, status, xhr)
		{
			window.location.reload();
		}
	});	
}

(function($) 
{
    $.fn.autogrow = function() 
    {
        return this.each(function() 
        {
            var textarea = this;
            $.fn.autogrow.resize(textarea);
            $(textarea).focus(function() 
            {
                textarea.interval = setInterval(function() 
                {
                    $.fn.autogrow.resize(textarea);
                }, 500);
            }).blur(function() 
            {
                clearInterval(textarea.interval);
            });
        });
    };
    $.fn.autogrow.resize = function(textarea) 
    {    
        var lineHeight = parseInt($(textarea).css('line-height'), 10);       
        var lineCount = Math.ceil(textarea.value.length / (textarea.cols + 20));
        var height = lineHeight * (lineCount + 1);
        $(textarea).css('height', height);
    };
})(jQuery);


	
	function arc_page_post_session()
	{
		arc_comment_head_actions();
	}

	$(document).ready(function(){
		$(".Thumb img").css({opacity: 1});

		$(".Thumb img").hover(function(){
			$(this).fadeTo("fast", 0.6);
		},function(){
			$(this).fadeTo("fast", 1);
		});

		$(".Entry").fitVids();

		arc_external('#Entry1', 150040584);
	});
	

	$(document).ready(function(){
		$(document).on('click', '.StatsTrigger', function(e){
			if(e.isDefaultPrevented())
				return false;

			e.preventDefault();

			if ($(this).attr('full_modal_url') == undefined)
			{
				var full_modal_url = '/user_stats/post/' + $(this).attr('rel') + arc_pathname(document.location.pathname);
				$(this).attr('href', full_modal_url);
				$(this).attr('full_modal_url', 1);
			}
			$(this).modal();
			return false;
		});
		
		$('.TooltipUserstat').livequery(function(){
			$(this).tipsy({gravity: 's'});
		});
	});
			
							
				  var _qevents = _qevents || [];

				  (function() {
				   var elem = document.createElement('script');

				   elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
				   elem.async = true;
				   elem.type = "text/javascript";
				   var scpt = document.getElementsByTagName('script')[0];
				   scpt.parentNode.insertBefore(elem, scpt);
				  })();
				
			

	if (($.client.os == 'Mac') && ($.client.browser == 'Firefox')) {

		var link = $('');
		link.attr({ type: 'text/css', rel: 'stylesheet', href: '/css/archinect.firefox.mac.css?1', });
		$('head').append( link );

	};

	if (($.client.os == 'Mac') && ($.client.browser == 'Chrome')) {

		var link = $('');
		link.attr({ type: 'text/css', rel: 'stylesheet', href: '/css/archinect.chrome.mac.css?1', });
		$('head').append( link );

	};

	if (($.client.os == 'Windows') && ($.client.browser == 'Chrome')) {

		var link = $('');
		link.attr({ type: 'text/css', rel: 'stylesheet', href: '/css/archinect.chrome.win.css?1', });
		$('head').append( link );

	};

	if ($.client.os == 'iPhone/iPod') {

		var link = $('');
		link.attr({ type: 'text/css', rel: 'stylesheet', href: '/css/archinect.iphone.css?1', });
		$('head').append( link );

	};



			
	$(document).ready(function()
	{		
		function detectOverlapping() 
		{
			var windowheight = $(window).height();
			var menuheight = $('.MainMenu').height();
			var remainingspace = windowheight - menuheight;
			if (remainingspace   

  


								After an unconventional launch in 2014, the Institute of Contemporary Art (ICA) Miami has opened its first permanent home—a new 37,500 sq. ft building in the city’s Design District. The privately-funded institution began operating in temporary quarters nearby in December 2014, shortly after it was founded by the former board of the Museum of Contemporary Art North Miami (MoCA NoMi) following a legal battle with the city.
															— The Art Newspaper
														

The new building in Miami's Design District was designed by Aranguren + Gallegos Arquitectos from Madrid and includes 20,500 sq. ft of exhibition space.

Are you sure you want to block this user and hide all related comments throughout the site?


				View all 
				  |   
				Firms
			


				View all 
				  |   
				Schools
			

view all